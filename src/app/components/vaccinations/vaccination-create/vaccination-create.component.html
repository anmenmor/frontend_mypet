<div *ngIf="validSession"><div *ngIf="valid" class="container">
  <h2>Añadir vacunación test</h2>
  <br /><br />

  <form
    [formGroup]="addVaccination"
    (ngSubmit)="onSubmit(addVaccination.value)"
  >
    <div *ngIf="clients.length > 0 && pet_id == null" class="form-group">
      <label for="client_id">Elige al propietario de la mascota</label>
      <select class="custom-select" (change)="updateId($any($event.target).value)">
        <option value="">Selecciona...</option>
        <option *ngFor="let client of clients" value="{{ client.id }}">
          {{ client.name }}
        </option>
      </select>
    </div>

    <div *ngIf="pets.length > 0" class="form-group">
      <label for="pet_id">Elige la mascota a vacunar </label>
      <select class="custom-select" formControlName="pet_id" [value]="pet_id">
        <option value="">Selecciona...</option>
        <option *ngFor="let pet of pets" value="{{ pet.id }}">
          {{ pet.name }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="date">Fecha de vacunación</label>
      <input
        type="date"
        class="form-control"
        id="date"
        formControlName="date"
      />
    </div>

    <div class="form-group">
      <label for="vaccine_id">Vacuna a administrar</label>
      <select
        class="custom-select"
        formControlName="vaccine_id"
        [value]="vaccine_id"
      >
        <option value="">Selecciona...</option>
        <option *ngFor="let vaccine of vaccines" value="{{ vaccine.id }}">
          {{ vaccine.name }}
        </option>
      </select>
    </div>

    <div class="form-group form-check">
      <input
        type="checkbox"
        class="form-check-input"
        id="done"
        formControlName="done"
      />
      <label class="form-check-label" for="done"
        >¿Se ha realizado ya esta vacunación?</label
      >
    </div>

    <button class="btn btn-primary" type="submit">Añadir vacunación</button>&nbsp;&nbsp;&nbsp;
    <button class="btn btn-secondary" type="button" (click)="return()">Volver atrás</button>
  </form>
  <br /><br />

</div>
<p style="text-align:center" [innerHTML]="htmlMsg"></p>
</div>